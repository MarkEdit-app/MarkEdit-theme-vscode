"use strict";const X=require("@codemirror/state"),t=require("@lezer/highlight"),f=require("markedit-api"),_=require("@codemirror/view"),v=require("@codemirror/language"),x=(r,c={})=>r??c,Y=x(f.MarkEdit.userSettings),L=I("extension.markeditTheming"),Z=y(!1)?x(L.lightTheme):void 0,tt=y(!0)?x(L.darkTheme):void 0;function I(r){return r===void 0?{}:x(Y[r])}function j(r){return r.enabledMode??"both"}function y(r,c=j(L)){return["both",r?"dark":"light"].includes(c)}function et(r,c,e){const s=ot({lhs:e,rhs:r?tt:Z});return{extensions:[...r?P(s,{dark:!0}):P(s),c].filter(o=>o!==void 0),colors:s}}function P(r,c){const e={},s=[],a=r.editor,o=r.highlight;a?.textColor&&(e["&"]??={},e["&"].color=a?.textColor,e[".cm-activeLineGutter"]={backgroundColor:a?.textColor}),a?.backgroundColor&&(e["&"]??={},e["&"].backgroundColor=a?.backgroundColor),a?.activeLineBackground&&(e[".cm-activeLine"]={backgroundColor:a?.activeLineBackground}),a?.caretColor&&(e[".cm-content"]={caretColor:a?.caretColor},e[".cm-cursor, .cm-dropCursor"]={borderLeftColor:a?.caretColor}),a?.selectionBackground&&(e["&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection"]={backgroundColor:a?.selectionBackground}),a?.matchingBracketBackground&&(e["&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket"]={backgroundColor:a?.matchingBracketBackground}),a?.gutterText&&(e[".cm-gutters"]??={},e[".cm-gutters"].color=a?.gutterText),a?.gutterBackground&&(e[".cm-gutters"]??={},e[".cm-gutters"].backgroundColor=a?.gutterBackground,e[".cm-gutters"].border="none"),a?.foldPlaceholderText&&(e[".cm-foldPlaceholder"]??={},e[".cm-foldPlaceholder"].color=a?.foldPlaceholderText),a?.foldPlaceholderBackground&&(e[".cm-foldPlaceholder"]??={},e[".cm-foldPlaceholder"].backgroundColor=a?.foldPlaceholderBackground,e[".cm-foldPlaceholder"].border="none"),a?.searchMatchBackground&&(e[".cm-searchMatch"]={backgroundColor:a?.searchMatchBackground}),a?.selectionMatchBackground&&(e[".cm-selectionMatch"]={backgroundColor:a?.selectionMatchBackground}),o?.heading&&s.push({tag:t.tags.heading,color:o?.heading}),o?.bold&&s.push({tag:t.tags.strong,color:o?.bold}),o?.italic&&s.push({tag:t.tags.emphasis,color:o?.italic}),o?.strikethrough&&s.push({tag:t.tags.strikethrough,color:o?.strikethrough}),o?.quote&&s.push({tag:t.tags.quote,color:o?.quote}),o?.link&&s.push({tag:[t.tags.url,t.tags.link],color:o?.link}),o?.divider&&s.push({tag:t.tags.contentSeparator,color:o?.divider}),o?.comment&&s.push({tag:t.tags.comment,color:o?.comment}),o?.meta&&s.push({tag:t.tags.meta,color:o?.meta}),o?.keyword&&s.push({tag:t.tags.keyword,color:o?.keyword}),o?.atom&&s.push({tag:[t.tags.atom,t.tags.bool],color:o?.atom}),o?.literal&&s.push({tag:[t.tags.literal,t.tags.inserted],color:o?.literal}),o?.string&&s.push({tag:[t.tags.string,t.tags.deleted],color:o?.string}),o?.special&&s.push({tag:[t.tags.regexp,t.tags.escape,t.tags.special(t.tags.string)],color:o?.special}),o?.variable&&s.push({tag:t.tags.definition(t.tags.variableName),color:o?.variable}),o?.local&&s.push({tag:t.tags.local(t.tags.variableName),color:o?.local}),o?.type&&s.push({tag:[t.tags.typeName,t.tags.namespace],color:o?.type}),o?.class&&s.push({tag:t.tags.className,color:o?.class}),o?.macro&&s.push({tag:[t.tags.special(t.tags.variableName),t.tags.macroName],color:o?.macro}),o?.property&&s.push({tag:t.tags.definition(t.tags.propertyName),color:o?.property}),o?.label&&s.push({tag:t.tags.labelName,color:o?.label}),o?.operator&&s.push({tag:[t.tags.operator,t.tags.operatorKeyword],color:o?.operator}),o?.constant&&s.push({tag:[t.tags.color,t.tags.constant(t.tags.name),t.tags.standard(t.tags.name)],color:o?.constant}),o?.instruction&&s.push({tag:[t.tags.separator,t.tags.processingInstruction,t.tags.definition(t.tags.name)],color:o?.instruction}),o?.invalid&&s.push({tag:t.tags.invalid,color:o?.invalid});const i=[];return Object.keys(e).length>0&&i.push(_.EditorView.theme(e,c)),s.length>0&&i.push(v.syntaxHighlighting(v.HighlightStyle.define(s))),i}function ot(r){return{editor:{...r.lhs?.editor,...r.rhs?.editor},highlight:{...r.lhs?.highlight,...r.rhs?.highlight},subtleEmphasis:r.rhs?.subtleEmphasis??r.lhs?.subtleEmphasis}}const n={selectionBackground:".cm-selectionBackground",lineGutter:".cm-lineNumbers > .cm-activeLineGutter",foldGutter:".cm-foldGutter, .cm-foldPlaceholder",visibleSpace:".cm-visibleSpace, .cm-visibleSpace::before, .cm-visibleLineBreak, .cm-visibleLineBreak::before",matchingBracket:".cm-matchingBracket",activeIndicator:".cm-md-activeIndicator",accentColor:".cm-md-header:not(.tok-meta):not(.cm-md-quote), .cm-md-codeInfo",syntaxMarker:".cm-md-header.tok-meta:not(.cm-md-quote), .cm-md-codeMark, .cm-md-linkMark, .cm-md-listMark, .cm-md-quoteMark, .cm-md-bold.tok-meta, .cm-md-italic.tok-meta, .cm-md-strikethrough.tok-meta",boldText:".cm-md-bold:not(.tok-meta)",italicText:".cm-md-italic:not(.tok-meta)",quoteText:".cm-md-quote:not(.cm-md-quoteMark)",dividerColor:".cm-md-horizontalRule"},at=`
.cm-activeLineGutter { background: inherit !important }
.cm-searchMatch.cm-searchMatch-selected { outline: inherit !important }
${n.lineGutter} {}
${n.foldGutter} {}
${n.visibleSpace} {}
${n.matchingBracket} {}
${n.activeIndicator} {}
${n.accentColor} {}
${n.syntaxMarker} {}
${n.boldText} {}
${n.italicText} {}
${n.quoteText} {}
${n.dividerColor} {}
`,F=window,rt=F.__extractStyleRules__??(r=>r.value?.rules),st=F.__extractHighlightSpecs__??(r=>r.value?.specs);function ct(r){const c=document.createElement("style");return c.textContent=r,document.head.appendChild(c),c}function nt(r){if(r.length===0)return[{},[]];const c=N(r);return[Object.fromEntries(c.flatMap(s=>{const a=rt(s)?.join(`
`)??"";return Object.entries(gt(a))})),c.flatMap(s=>st(s)??[])]}function h(r,c,e){return r.find(s=>!!(s.tag.toString().includes(c.toString())&&s.color!==void 0))?.color??e}function S(r,c,e){for(const[s,a]of Object.entries(r))if(s.includes(c)&&(e===void 0||!s.includes(e))){const o=a.background??a.backgroundColor;if(o!==void 0)return o}}function it(r){const c=r.match(/rgba?\((\d+), (\d+), (\d+)(?:, ([\d.]+))?\)/);if(c===null)return;const[e,s,a]=c.slice(1,4).map(Number);return`rgba(${e}, ${s}, ${a}, 0.6)`}function G(r){const c=a=>a!==null&&typeof a=="object";if(!c(r))return!0;const e=Object.entries(r),s=a=>a!=null;for(const[,a]of e)if(c(a)){if(!G(a))return!1}else if(s(a))return!1;return!0}function N(r){return Array.isArray(r)?r.flatMap(N):"extension"in r?N(r.extension):[r]}function gt(r){const c={},e=new CSSStyleSheet;e.replaceSync(r);for(const s of e.cssRules){const{style:a,selectorText:o}=s,{background:i,backgroundColor:l}=a;c[o]={},i.length>0&&(c[o].background=i),l.length>0&&(c[o].backgroundColor=l)}return c}function lt(r){const c=r.options?.settingsKey,e=j(I(c));r.light!==void 0&&y(!1,e)&&(g().customThemes.light=r.light),r.dark!==void 0&&y(!0,e)&&(g().customThemes.dark=r.dark),typeof f.MarkEdit.editorView=="object"&&w(f.MarkEdit.editorView)}const b=window,g=()=>b.__markeditTheming__,H=matchMedia("(prefers-color-scheme: dark)");typeof g()!="object"&&dt();function dt(){b.__markeditTheming__={styleSheet:ct(at),configurator:new X.Compartment,customThemes:{},lightOriginalRules:{},darkOriginalRules:{}},f.MarkEdit.addExtension(g().configurator.of([])),f.MarkEdit.onEditorReady(c=>w(c));const r=()=>setTimeout(()=>w(f.MarkEdit.editorView),15);H.addEventListener("change",r),g().mainThemeName=b.config.theme,Object.defineProperty(b.config,"theme",{get(){return g().mainThemeName},set(c){g().mainThemeName=c,r()}})}function w(r){const c=H.matches,e=c?g().customThemes.dark:g().customThemes.light,{extensions:s,colors:a}=et(c,e?.extension,e?.colors);r.dispatch({effects:g().configurator.reconfigure(s)});const[o,i]=nt(s),l=s.length===0&&G(a);g().styleSheet.disabled=l,ut(r,c,l,o,i,a)}function ut(r,c,e,s,a,o){const i=S(s,".cm-activeLine",".cm-activeLineGutter"),l=S(s,n.selectionBackground),B=S(s,n.matchingBracket),p=getComputedStyle(r.contentDOM).color,E=o.editor?.visibleSpaceColor??it(p),m=o.subtleEmphasis===!0?p:void 0,q=h(a,t.tags.heading,m),A=h(a,t.tags.processingInstruction,m),V=h(a,t.tags.strong,m),K=h(a,t.tags.emphasis,m),D=h(a,t.tags.quote,m),z=h(a,t.tags.contentSeparator,m),U=[[n.activeIndicator,i,"background"],[n.matchingBracket,B,"background"],[n.lineGutter,p,"color"],[n.foldGutter,E,"color"],[n.visibleSpace,E,"color"],[n.accentColor,q,"color"],[n.syntaxMarker,A,"color"],[n.boldText,V,"color"],[n.italicText,K,"color"],[n.quoteText,D,"color"],[n.dividerColor,z,"color"]],W=Array.from(document.querySelectorAll("style")),k=c?g().darkOriginalRules:g().lightOriginalRules;for(const J of W){const T=J.sheet?.cssRules;if(T!==void 0)for(let M=0;M<T.length;++M){const d=T[M],u=d.selectorText??"";u.includes(".cm-focused")&&u.includes(n.selectionBackground)&&(k.selectionBackground??=d.cssText,e?d.cssText=k.selectionBackground:l!==void 0&&d.style.setProperty("background",l,"important")),q!==void 0&&(u===".cm-md-header"||u===".cm-md-header:not(.cm-md-quote)")&&(k.markdownHeader??=d.cssText,e?d.cssText=k.markdownHeader:d.style.removeProperty("color"));for(const[Q,$,O]of U)u===Q&&($===void 0?d.style.removeProperty(O):(d.style.setProperty(O,$,"important"),(u===n.matchingBracket||u===n.activeIndicator)&&d.style.setProperty("box-shadow","unset","important")))}}}function C(){return C=Object.assign?Object.assign.bind():function(r){for(var c=1;c<arguments.length;c++){var e=arguments[c];for(var s in e)({}).hasOwnProperty.call(e,s)&&(r[s]=e[s])}return r},C.apply(null,arguments)}var R=r=>{var{theme:c,settings:e={},styles:s=[]}=r,a={".cm-gutters":{}},o={};e.background&&(o.backgroundColor=e.background),e.backgroundImage&&(o.backgroundImage=e.backgroundImage),e.foreground&&(o.color=e.foreground),e.fontSize&&(o.fontSize=e.fontSize),(e.background||e.foreground)&&(a["&"]=o),e.fontFamily&&(a["&.cm-editor .cm-scroller"]={fontFamily:e.fontFamily}),e.gutterBackground&&(a[".cm-gutters"].backgroundColor=e.gutterBackground),e.gutterForeground&&(a[".cm-gutters"].color=e.gutterForeground),e.gutterBorder&&(a[".cm-gutters"].borderRightColor=e.gutterBorder),e.caret&&(a[".cm-content"]={caretColor:e.caret},a[".cm-cursor, .cm-dropCursor"]={borderLeftColor:e.caret});var i={};e.gutterActiveForeground&&(i.color=e.gutterActiveForeground),e.lineHighlight&&(a[".cm-activeLine"]={backgroundColor:e.lineHighlight},i.backgroundColor=e.lineHighlight),a[".cm-activeLineGutter"]=i,e.selection&&(a["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:e.selection+" !important"}),e.selectionMatch&&(a["& .cm-selectionMatch"]={backgroundColor:e.selectionMatch});var l=_.EditorView.theme(a,{dark:c==="dark"}),B=v.HighlightStyle.define(s),p=[l,v.syntaxHighlighting(B)];return p},mt={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#99999926",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},ht=[{tag:[t.tags.keyword,t.tags.operatorKeyword,t.tags.modifier,t.tags.color,t.tags.constant(t.tags.name),t.tags.standard(t.tags.name),t.tags.standard(t.tags.tagName),t.tags.special(t.tags.brace),t.tags.atom,t.tags.bool,t.tags.special(t.tags.variableName)],color:"#0000ff"},{tag:[t.tags.moduleKeyword,t.tags.controlKeyword],color:"#af00db"},{tag:[t.tags.name,t.tags.deleted,t.tags.character,t.tags.macroName,t.tags.propertyName,t.tags.variableName,t.tags.labelName,t.tags.definition(t.tags.name)],color:"#0070c1"},{tag:t.tags.heading,fontWeight:"bold",color:"#0070c1"},{tag:[t.tags.typeName,t.tags.className,t.tags.tagName,t.tags.number,t.tags.changed,t.tags.annotation,t.tags.self,t.tags.namespace],color:"#267f99"},{tag:[t.tags.function(t.tags.variableName),t.tags.function(t.tags.propertyName)],color:"#795e26"},{tag:[t.tags.number],color:"#098658"},{tag:[t.tags.operator,t.tags.punctuation,t.tags.separator,t.tags.url,t.tags.escape,t.tags.regexp],color:"#383a42"},{tag:[t.tags.regexp],color:"#af00db"},{tag:[t.tags.special(t.tags.string),t.tags.processingInstruction,t.tags.string,t.tags.inserted],color:"#a31515"},{tag:[t.tags.angleBracket],color:"#383a42"},{tag:t.tags.strong,fontWeight:"bold"},{tag:t.tags.emphasis,fontStyle:"italic"},{tag:t.tags.strikethrough,textDecoration:"line-through"},{tag:[t.tags.meta,t.tags.comment],color:"#008000"},{tag:t.tags.link,color:"#4078f2",textDecoration:"underline"},{tag:t.tags.invalid,color:"#e45649"}];function ft(r){var{theme:c="light",settings:e={},styles:s=[]}={};return R({theme:c,settings:C({},mt,e),styles:[...ht,...s]})}var pt=ft(),kt={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},bt=[{tag:[t.tags.keyword,t.tags.operatorKeyword,t.tags.modifier,t.tags.color,t.tags.constant(t.tags.name),t.tags.standard(t.tags.name),t.tags.standard(t.tags.tagName),t.tags.special(t.tags.brace),t.tags.atom,t.tags.bool,t.tags.special(t.tags.variableName)],color:"#569cd6"},{tag:[t.tags.controlKeyword,t.tags.moduleKeyword],color:"#c586c0"},{tag:[t.tags.name,t.tags.deleted,t.tags.character,t.tags.macroName,t.tags.propertyName,t.tags.variableName,t.tags.labelName,t.tags.definition(t.tags.name)],color:"#9cdcfe"},{tag:t.tags.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[t.tags.typeName,t.tags.className,t.tags.tagName,t.tags.number,t.tags.changed,t.tags.annotation,t.tags.self,t.tags.namespace],color:"#4ec9b0"},{tag:[t.tags.function(t.tags.variableName),t.tags.function(t.tags.propertyName)],color:"#dcdcaa"},{tag:[t.tags.number],color:"#b5cea8"},{tag:[t.tags.operator,t.tags.punctuation,t.tags.separator,t.tags.url,t.tags.escape,t.tags.regexp],color:"#d4d4d4"},{tag:[t.tags.regexp],color:"#d16969"},{tag:[t.tags.special(t.tags.string),t.tags.processingInstruction,t.tags.string,t.tags.inserted],color:"#ce9178"},{tag:[t.tags.angleBracket],color:"#808080"},{tag:t.tags.strong,fontWeight:"bold"},{tag:t.tags.emphasis,fontStyle:"italic"},{tag:t.tags.strikethrough,textDecoration:"line-through"},{tag:[t.tags.meta,t.tags.comment],color:"#6a9955"},{tag:t.tags.link,color:"#6a9955",textDecoration:"underline"},{tag:t.tags.invalid,color:"#ff0000"}];function vt(r){var{theme:c="dark",settings:e={},styles:s=[]}={};return R({theme:c,settings:C({},kt,e),styles:[...bt,...s]})}var yt=vt();lt({light:{extension:pt,colors:{subtleEmphasis:!0}},dark:{extension:yt,colors:{subtleEmphasis:!0}},options:{settingsKey:"extension.markeditThemeVSCode"}});
