"use strict";const Y=require("@codemirror/state"),t=require("@lezer/highlight"),k=require("markedit-api"),E=require("@codemirror/view"),v=require("@codemirror/language"),x=(r,s={})=>r??s,Z=x(k.MarkEdit.userSettings),q=I("extension.markeditTheming"),tt=y(!1)?x(q.lightTheme):void 0,et=y(!0)?x(q.darkTheme):void 0;function I(r){return r===void 0?{}:x(Z[r])}function j(r){return r.enabledMode??"both"}function y(r,s=j(q)){return["both",r?"dark":"light"].includes(s)}function ot(r,s,e){const c=at({lhs:e,rhs:r?et:tt});return{extensions:[...r?_(c,{dark:!0}):_(c),s].filter(a=>a!==void 0),colors:c}}function _(r,s){const e={},c=[],o=r.editor,a=r.highlight;o?.textColor&&(e["&"]??={},e["&"].color=o?.textColor,e[".cm-activeLineGutter"]={backgroundColor:o?.textColor}),o?.backgroundColor&&(e["&"]??={},e["&"].backgroundColor=o?.backgroundColor),o?.activeLineBackground&&(e[".cm-activeLine"]={backgroundColor:o?.activeLineBackground}),o?.caretColor&&(e[".cm-content"]={caretColor:o?.caretColor},e[".cm-cursor, .cm-dropCursor"]={borderLeftColor:o?.caretColor}),o?.selectionBackground&&(e["&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection"]={backgroundColor:o?.selectionBackground}),o?.matchingBracketBackground&&(e["&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket"]={backgroundColor:o?.matchingBracketBackground}),o?.gutterText&&(e[".cm-gutters"]??={},e[".cm-gutters"].color=o?.gutterText),o?.gutterBackground&&(e[".cm-gutters"]??={},e[".cm-gutters"].backgroundColor=o?.gutterBackground,e[".cm-gutters"].border="none"),o?.foldPlaceholderText&&(e[".cm-foldPlaceholder"]??={},e[".cm-foldPlaceholder"].color=o?.foldPlaceholderText),o?.foldPlaceholderBackground&&(e[".cm-foldPlaceholder"]??={},e[".cm-foldPlaceholder"].backgroundColor=o?.foldPlaceholderBackground,e[".cm-foldPlaceholder"].border="none"),o?.searchMatchBackground&&(e[".cm-searchMatch"]={backgroundColor:o?.searchMatchBackground}),o?.selectionMatchBackground&&(e[".cm-selectionMatch"]={backgroundColor:o?.selectionMatchBackground}),a?.heading&&c.push({tag:t.tags.heading,color:a?.heading}),a?.bold&&c.push({tag:t.tags.strong,color:a?.bold}),a?.italic&&c.push({tag:t.tags.emphasis,color:a?.italic}),a?.strikethrough&&c.push({tag:t.tags.strikethrough,color:a?.strikethrough}),a?.quote&&c.push({tag:t.tags.quote,color:a?.quote}),a?.link&&c.push({tag:[t.tags.url,t.tags.link],color:a?.link}),a?.divider&&c.push({tag:t.tags.contentSeparator,color:a?.divider}),a?.comment&&c.push({tag:t.tags.comment,color:a?.comment}),a?.meta&&c.push({tag:t.tags.meta,color:a?.meta}),a?.keyword&&c.push({tag:t.tags.keyword,color:a?.keyword}),a?.atom&&c.push({tag:[t.tags.atom,t.tags.bool],color:a?.atom}),a?.literal&&c.push({tag:[t.tags.literal,t.tags.inserted],color:a?.literal}),a?.string&&c.push({tag:[t.tags.string,t.tags.deleted],color:a?.string}),a?.special&&c.push({tag:[t.tags.regexp,t.tags.escape,t.tags.special(t.tags.string)],color:a?.special}),a?.variable&&c.push({tag:t.tags.definition(t.tags.variableName),color:a?.variable}),a?.local&&c.push({tag:t.tags.local(t.tags.variableName),color:a?.local}),a?.type&&c.push({tag:[t.tags.typeName,t.tags.namespace],color:a?.type}),a?.class&&c.push({tag:t.tags.className,color:a?.class}),a?.macro&&c.push({tag:[t.tags.special(t.tags.variableName),t.tags.macroName],color:a?.macro}),a?.property&&c.push({tag:t.tags.definition(t.tags.propertyName),color:a?.property}),a?.label&&c.push({tag:t.tags.labelName,color:a?.label}),a?.operator&&c.push({tag:[t.tags.operator,t.tags.operatorKeyword],color:a?.operator}),a?.constant&&c.push({tag:[t.tags.color,t.tags.constant(t.tags.name),t.tags.standard(t.tags.name)],color:a?.constant}),a?.instruction&&c.push({tag:[t.tags.separator,t.tags.processingInstruction,t.tags.definition(t.tags.name)],color:a?.instruction}),a?.invalid&&c.push({tag:t.tags.invalid,color:a?.invalid});const i=[];return Object.keys(e).length>0&&i.push(E.EditorView.theme(e,s)),c.length>0&&i.push(v.syntaxHighlighting(v.HighlightStyle.define(c))),i}function at(r){return{editor:{...r.lhs?.editor,...r.rhs?.editor},highlight:{...r.lhs?.highlight,...r.rhs?.highlight},allowsFallback:r.rhs?.allowsFallback??r.lhs?.allowsFallback}}const n={selectionBackground:".cm-selectionBackground",lineGutter:".cm-lineNumbers > .cm-activeLineGutter",foldGutter:".cm-foldGutter, .cm-foldPlaceholder",visibleSpace:".cm-visibleSpace, .cm-visibleSpace::before, .cm-visibleLineBreak, .cm-visibleLineBreak::before",matchingBracket:".cm-matchingBracket",activeIndicator:".cm-md-activeIndicator",accentColor:".cm-md-header:not(.tok-meta):not(.cm-md-quote), .cm-md-codeInfo",syntaxMarker:".cm-md-header.tok-meta:not(.cm-md-quote), .cm-md-codeMark, .cm-md-linkMark, .cm-md-listMark, .cm-md-quoteMark, .cm-md-bold.tok-meta, .cm-md-italic.tok-meta, .cm-md-strikethrough.tok-meta",boldText:".cm-md-bold:not(.tok-meta)",italicText:".cm-md-italic:not(.tok-meta)",quoteText:".cm-md-quote:not(.cm-md-quoteMark)",dividerColor:".cm-md-horizontalRule"},rt=`
.cm-activeLineGutter { background: inherit !important }
.cm-searchMatch.cm-searchMatch-selected { outline: inherit !important }
${n.lineGutter} {}
${n.foldGutter} {}
${n.visibleSpace} {}
${n.matchingBracket} {}
${n.activeIndicator} {}
${n.accentColor} {}
${n.syntaxMarker} {}
${n.boldText} {}
${n.italicText} {}
${n.quoteText} {}
${n.dividerColor} {}
`,G=window,ct=G.__extractStyleRules__??(r=>r.value?.rules),st=G.__extractHighlightSpecs__??(r=>r.value?.specs);function nt(r){const s=document.createElement("style");return s.textContent=r,document.head.appendChild(s),s}function it(r){if(r.length===0)return[{},[]];const s=w(r);return[Object.fromEntries(s.flatMap(c=>{const o=ct(c)?.join(`
`)??"";return Object.entries(gt(o))})),s.flatMap(c=>st(c)??[])]}function h(r,s,e){return r.find(c=>!!(c.tag.toString().includes(s.toString())&&c.color!==void 0))?.color??e}function N(r,s,e){for(const[c,o]of Object.entries(r))if(c.includes(s)&&(e===void 0||!c.includes(e))){const a=o.background??o.backgroundColor;if(a!==void 0)return a}}function lt(r){const s=r.match(/rgba?\((\d+), (\d+), (\d+)(?:, ([\d.]+))?\)/);if(s===null)return;const[e,c,o]=s.slice(1,4).map(Number);return`rgba(${e}, ${c}, ${o}, 0.6)`}function H(r){const s=o=>o!==null&&typeof o=="object";if(!s(r))return!0;const e=Object.entries(r),c=o=>o!=null;for(const[,o]of e)if(s(o)){if(!H(o))return!1}else if(c(o))return!1;return!0}function w(r){return Array.isArray(r)?r.flatMap(w):"extension"in r?w(r.extension):[r]}function gt(r){const s={},e=new CSSStyleSheet;e.replaceSync(r);for(const c of e.cssRules){const{style:o,selectorText:a}=c,{background:i,backgroundColor:d}=o;s[a]={},i.length>0&&(s[a].background=i),d.length>0&&(s[a].backgroundColor=d)}return s}function dt(r){const s=r.options?.settingsKey,e=j(I(s));r.light!==void 0&&y(!1,e)&&(l().customThemes.light=r.light),r.dark!==void 0&&y(!0,e)&&(l().customThemes.dark=r.dark),typeof k.MarkEdit.editorView=="object"&&L(k.MarkEdit.editorView)}const b=window,l=()=>b.__markeditTheming__,R=matchMedia("(prefers-color-scheme: dark)");typeof l()!="object"&&ut();function ut(){b.__markeditTheming__={styleSheet:nt(rt),configurator:new Y.Compartment,customThemes:{},lightOriginalRules:{},darkOriginalRules:{}},k.MarkEdit.addExtension(l().configurator.of([])),k.MarkEdit.onEditorReady(s=>L(s));const r=()=>setTimeout(()=>L(k.MarkEdit.editorView),15);R.addEventListener("change",r),l().mainThemeName=b.config.theme,Object.defineProperty(b.config,"theme",{get(){return l().mainThemeName},set(s){l().mainThemeName=s,r()}})}function L(r){const s=R.matches,e=s?l().customThemes.dark:l().customThemes.light,{extensions:c,colors:o}=ot(s,e?.extension,e?.colors);r.dispatch({effects:l().configurator.reconfigure(c)});const[a,i]=it(c),d=c.length===0&&H(o),m=o.allowsFallback??e?.extension!==void 0;l().styleSheet.disabled=d,mt(r,s,d,a,i,o,m)}function mt(r,s,e,c,o,a,i){const d=N(c,".cm-activeLine",".cm-activeLineGutter"),m=N(c,n.selectionBackground),B=N(c,n.matchingBracket),T=getComputedStyle(r.contentDOM).color,$=a.editor?.visibleSpaceColor??lt(T),f=i?T:void 0,F=h(o,t.tags.heading,f),V=h(o,t.tags.processingInstruction,f),K=h(o,t.tags.strong,f),D=h(o,t.tags.emphasis,f),z=h(o,t.tags.quote,f),U=h(o,t.tags.contentSeparator,f),W=[[n.activeIndicator,d,"background"],[n.matchingBracket,B,"background"],[n.lineGutter,T,"color"],[n.foldGutter,$,"color"],[n.visibleSpace,$,"color"],[n.accentColor,F,"color"],[n.syntaxMarker,V,"color"],[n.boldText,K,"color"],[n.italicText,D,"color"],[n.quoteText,z,"color"],[n.dividerColor,U,"color"]],J=Array.from(document.querySelectorAll("style")),p=s?l().darkOriginalRules:l().lightOriginalRules;for(const Q of J){const M=Q.sheet?.cssRules;if(M!==void 0)for(let S=0;S<M.length;++S){const g=M[S],u=g.selectorText??"";u.includes(".cm-focused")&&u.includes(n.selectionBackground)&&(p.selectionBackground??=g.cssText,e?g.cssText=p.selectionBackground:m!==void 0&&g.style.setProperty("background",m,"important")),F!==void 0&&(u===".cm-md-header"||u===".cm-md-header:not(.cm-md-quote)")&&(p.markdownHeader??=g.cssText,e?g.cssText=p.markdownHeader:g.style.removeProperty("color"));for(const[X,O,P]of W)u===X&&(O===void 0?g.style.removeProperty(P):(g.style.setProperty(P,O,"important"),(u===n.matchingBracket||u===n.activeIndicator)&&g.style.setProperty("box-shadow","unset","important")))}}}function C(){return C=Object.assign?Object.assign.bind():function(r){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var c in e)({}).hasOwnProperty.call(e,c)&&(r[c]=e[c])}return r},C.apply(null,arguments)}var A=r=>{var{theme:s,settings:e={},styles:c=[]}=r,o={".cm-gutters":{}},a={};e.background&&(a.backgroundColor=e.background),e.backgroundImage&&(a.backgroundImage=e.backgroundImage),e.foreground&&(a.color=e.foreground),e.fontSize&&(a.fontSize=e.fontSize),(e.background||e.foreground)&&(o["&"]=a),e.fontFamily&&(o["&.cm-editor .cm-scroller"]={fontFamily:e.fontFamily}),e.gutterBackground&&(o[".cm-gutters"].backgroundColor=e.gutterBackground),e.gutterForeground&&(o[".cm-gutters"].color=e.gutterForeground),e.gutterBorder&&(o[".cm-gutters"].borderRightColor=e.gutterBorder),e.caret&&(o[".cm-content"]={caretColor:e.caret},o[".cm-cursor, .cm-dropCursor"]={borderLeftColor:e.caret});var i={};e.gutterActiveForeground&&(i.color=e.gutterActiveForeground),e.lineHighlight&&(o[".cm-activeLine"]={backgroundColor:e.lineHighlight},i.backgroundColor=e.lineHighlight),o[".cm-activeLineGutter"]=i,e.selection&&(o["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:e.selection+" !important"}),e.selectionMatch&&(o["& .cm-selectionMatch"]={backgroundColor:e.selectionMatch});var d=E.EditorView.theme(o,{dark:s==="dark"}),m=v.HighlightStyle.define(c),B=[d,v.syntaxHighlighting(m)];return B},ft={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#99999926",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},ht=[{tag:[t.tags.keyword,t.tags.operatorKeyword,t.tags.modifier,t.tags.color,t.tags.constant(t.tags.name),t.tags.standard(t.tags.name),t.tags.standard(t.tags.tagName),t.tags.special(t.tags.brace),t.tags.atom,t.tags.bool,t.tags.special(t.tags.variableName)],color:"#0000ff"},{tag:[t.tags.moduleKeyword,t.tags.controlKeyword],color:"#af00db"},{tag:[t.tags.name,t.tags.deleted,t.tags.character,t.tags.macroName,t.tags.propertyName,t.tags.variableName,t.tags.labelName,t.tags.definition(t.tags.name)],color:"#0070c1"},{tag:t.tags.heading,fontWeight:"bold",color:"#0070c1"},{tag:[t.tags.typeName,t.tags.className,t.tags.tagName,t.tags.number,t.tags.changed,t.tags.annotation,t.tags.self,t.tags.namespace],color:"#267f99"},{tag:[t.tags.function(t.tags.variableName),t.tags.function(t.tags.propertyName)],color:"#795e26"},{tag:[t.tags.number],color:"#098658"},{tag:[t.tags.operator,t.tags.punctuation,t.tags.separator,t.tags.url,t.tags.escape,t.tags.regexp],color:"#383a42"},{tag:[t.tags.regexp],color:"#af00db"},{tag:[t.tags.special(t.tags.string),t.tags.processingInstruction,t.tags.string,t.tags.inserted],color:"#a31515"},{tag:[t.tags.angleBracket],color:"#383a42"},{tag:t.tags.strong,fontWeight:"bold"},{tag:t.tags.emphasis,fontStyle:"italic"},{tag:t.tags.strikethrough,textDecoration:"line-through"},{tag:[t.tags.meta,t.tags.comment],color:"#008000"},{tag:t.tags.link,color:"#4078f2",textDecoration:"underline"},{tag:t.tags.invalid,color:"#e45649"}];function kt(r){var{theme:s="light",settings:e={},styles:c=[]}={};return A({theme:s,settings:C({},ft,e),styles:[...ht,...c]})}var pt=kt(),bt={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},vt=[{tag:[t.tags.keyword,t.tags.operatorKeyword,t.tags.modifier,t.tags.color,t.tags.constant(t.tags.name),t.tags.standard(t.tags.name),t.tags.standard(t.tags.tagName),t.tags.special(t.tags.brace),t.tags.atom,t.tags.bool,t.tags.special(t.tags.variableName)],color:"#569cd6"},{tag:[t.tags.controlKeyword,t.tags.moduleKeyword],color:"#c586c0"},{tag:[t.tags.name,t.tags.deleted,t.tags.character,t.tags.macroName,t.tags.propertyName,t.tags.variableName,t.tags.labelName,t.tags.definition(t.tags.name)],color:"#9cdcfe"},{tag:t.tags.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[t.tags.typeName,t.tags.className,t.tags.tagName,t.tags.number,t.tags.changed,t.tags.annotation,t.tags.self,t.tags.namespace],color:"#4ec9b0"},{tag:[t.tags.function(t.tags.variableName),t.tags.function(t.tags.propertyName)],color:"#dcdcaa"},{tag:[t.tags.number],color:"#b5cea8"},{tag:[t.tags.operator,t.tags.punctuation,t.tags.separator,t.tags.url,t.tags.escape,t.tags.regexp],color:"#d4d4d4"},{tag:[t.tags.regexp],color:"#d16969"},{tag:[t.tags.special(t.tags.string),t.tags.processingInstruction,t.tags.string,t.tags.inserted],color:"#ce9178"},{tag:[t.tags.angleBracket],color:"#808080"},{tag:t.tags.strong,fontWeight:"bold"},{tag:t.tags.emphasis,fontStyle:"italic"},{tag:t.tags.strikethrough,textDecoration:"line-through"},{tag:[t.tags.meta,t.tags.comment],color:"#6a9955"},{tag:t.tags.link,color:"#6a9955",textDecoration:"underline"},{tag:t.tags.invalid,color:"#ff0000"}];function yt(r){var{theme:s="dark",settings:e={},styles:c=[]}={};return A({theme:s,settings:C({},bt,e),styles:[...vt,...c]})}var Ct=yt();dt({light:{extension:pt},dark:{extension:Ct},options:{settingsKey:"extension.markeditThemeVSCode"}});
