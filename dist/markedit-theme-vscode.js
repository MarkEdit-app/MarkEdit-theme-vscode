"use strict";const G=require("@codemirror/state"),t=require("@lezer/highlight"),m=require("markedit-api"),H=require("@codemirror/view"),B=require("@codemirror/language"),s={selectionBackground:".cm-selectionBackground",lineGutter:".cm-lineNumbers > .cm-activeLineGutter",foldGutter:".cm-foldGutter, .cm-foldPlaceholder",visibleSpace:".cm-visibleSpace, .cm-visibleSpace::before, .cm-visibleLineBreak, .cm-visibleLineBreak::before",matchingBracket:".cm-matchingBracket",activeIndicator:".cm-md-activeIndicator",emphasisElement:".cm-md-bold:not(.tok-meta), .cm-md-italic:not(.tok-meta), .cm-md-quote:not(.cm-md-quoteMark)",accentColor:".cm-md-header:not(.tok-meta):not(.cm-md-quote), .cm-md-codeInfo",syntaxMarker:".cm-md-header.tok-meta:not(.cm-md-quote), .cm-md-codeMark, .cm-md-linkMark, .cm-md-listMark, .cm-md-quoteMark"},R=`
.cm-activeLineGutter { background: inherit !important }
.cm-searchMatch.cm-searchMatch-selected { outline: inherit !important }
${s.lineGutter} {}
${s.foldGutter} {}
${s.visibleSpace} {}
${s.matchingBracket} {}
${s.activeIndicator} {}
${s.emphasisElement} {}
${s.accentColor} {}
${s.syntaxMarker} {}
`,E=window,j=E.__extractStyleRules__??(a=>a.value?.rules),A=E.__extractHighlightSpecs__??(a=>a.value?.specs);function D(a){const o=document.createElement("style");return o.textContent=a,document.head.appendChild(o),o}function P(a){if(a===void 0)return[{},[]];const o=U(a);return[Object.fromEntries(o.flatMap(r=>{const n=j(r)?.join(`
`)??"";return Object.entries(W(n))})),o.flatMap(r=>A(r)??[])]}function V(a,o){return a.some(e=>e.tag.toString().includes(o.toString())?e.color!==void 0:!1)}function x(a,o,e){for(const[r,n]of Object.entries(a))if(r.includes(o)&&(e===void 0||!r.includes(e))){const c=n.background??n.backgroundColor;if(c!==void 0)return c}}function K(a){const o=a.match(/rgba?\((\d+), (\d+), (\d+)(?:, ([\d.]+))?\)/);if(o===null)return;const[e,r,n]=o.slice(1,4).map(Number);return`rgba(${e}, ${r}, ${n}, 0.6)`}function U(a){const o=[],e=[a];for(;e.length>0;){const r=e.pop();Array.isArray(r)?r.forEach(n=>e.push(n)):"extension"in r?e.push(r.extension):o.push(r)}return o}function W(a){const o={},e=new CSSStyleSheet;e.replaceSync(a);for(const r of e.cssRules){const{style:n,selectorText:c}=r,{background:l,backgroundColor:u}=n;o[c]={},l.length>0&&(o[c].background=l),u.length>0&&(o[c].backgroundColor=u)}return o}function z(a){a.light!==void 0&&(i().customThemes.light=a.light),a.dark!==void 0&&(i().customThemes.dark=a.dark),typeof m.MarkEdit.editorView=="object"&&M(m.MarkEdit.editorView)}const k=window,i=()=>k.__markeditTheming__,L=matchMedia("(prefers-color-scheme: dark)");typeof i()!="object"&&J();function J(){k.__markeditTheming__={styleSheet:D(R),configurator:new G.Compartment,customThemes:{},lightOriginalRules:{},darkOriginalRules:{}},m.MarkEdit.addExtension(i().configurator.of([])),m.MarkEdit.onEditorReady(o=>M(o));const a=()=>setTimeout(()=>M(m.MarkEdit.editorView),15);L.addEventListener("change",a),i().mainThemeName=k.config.theme,Object.defineProperty(k.config,"theme",{get(){return i().mainThemeName},set(o){i().mainThemeName=o,a()}})}function M(a){const o=L.matches,e=o?i().customThemes.dark:i().customThemes.light;a.dispatch({effects:i().configurator.reconfigure(e?.extension??[])});const[r,n]=P(e?.extension),c=e===void 0;i().styleSheet.disabled=c,Q(a,o,c,r,n,e?.colors)}function Q(a,o,e,r,n,c){const l=x(r,".cm-activeLine",".cm-activeLineGutter"),u=x(r,s.selectionBackground),b=x(r,s.matchingBracket),f=getComputedStyle(a.contentDOM).color,S=c?.visibleSpace??K(f),$=V(n,t.tags.heading),O=[[s.activeIndicator,l,"background"],[s.matchingBracket,b,"background"],[s.lineGutter,f,"color"],[s.foldGutter,S,"color"],[s.visibleSpace,S,"color"],[s.accentColor,c?.accentColor,"color"],[s.syntaxMarker,c?.syntaxMarker,"color"]],F=Array.from(document.querySelectorAll("style")),h=o?i().darkOriginalRules:i().lightOriginalRules;for(const I of F){const y=I.sheet?.cssRules;if(y!==void 0)for(let v=0;v<y.length;++v){const g=y[v],d=g.selectorText??"";d.includes(".cm-focused")&&d.includes(s.selectionBackground)&&(h.selectionBackground??=g.cssText,e?g.cssText=h.selectionBackground:u!==void 0&&g.style.setProperty("background",u,"important")),$&&(d===".cm-md-header"||d===".cm-md-header:not(.cm-md-quote)")&&(h.markdownHeader??=g.cssText,e?g.cssText=h.markdownHeader:g.style.removeProperty("color"));for(const[q,C,N]of O)d===q&&(C===void 0?g.style.removeProperty(N):(g.style.setProperty(N,C,"important"),(d===s.matchingBracket||d===s.activeIndicator)&&g.style.setProperty("box-shadow","unset","important")));d===s.emphasisElement&&(c?.subtleEmphasis??!0?g.style.setProperty("color","inherit","important"):g.style.removeProperty("color"))}}}function p(){return p=Object.assign?Object.assign.bind():function(a){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var r in e)({}).hasOwnProperty.call(e,r)&&(a[r]=e[r])}return a},p.apply(null,arguments)}var _=a=>{var{theme:o,settings:e={},styles:r=[]}=a,n={".cm-gutters":{}},c={};e.background&&(c.backgroundColor=e.background),e.backgroundImage&&(c.backgroundImage=e.backgroundImage),e.foreground&&(c.color=e.foreground),e.fontSize&&(c.fontSize=e.fontSize),(e.background||e.foreground)&&(n["&"]=c),e.fontFamily&&(n["&.cm-editor .cm-scroller"]={fontFamily:e.fontFamily}),e.gutterBackground&&(n[".cm-gutters"].backgroundColor=e.gutterBackground),e.gutterForeground&&(n[".cm-gutters"].color=e.gutterForeground),e.gutterBorder&&(n[".cm-gutters"].borderRightColor=e.gutterBorder),e.caret&&(n[".cm-content"]={caretColor:e.caret},n[".cm-cursor, .cm-dropCursor"]={borderLeftColor:e.caret});var l={};e.gutterActiveForeground&&(l.color=e.gutterActiveForeground),e.lineHighlight&&(n[".cm-activeLine"]={backgroundColor:e.lineHighlight},l.backgroundColor=e.lineHighlight),n[".cm-activeLineGutter"]=l,e.selection&&(n["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:e.selection+" !important"}),e.selectionMatch&&(n["& .cm-selectionMatch"]={backgroundColor:e.selectionMatch});var u=H.EditorView.theme(n,{dark:o==="dark"}),b=B.HighlightStyle.define(r),f=[u,B.syntaxHighlighting(b)];return f},X={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#99999926",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},Y=[{tag:[t.tags.keyword,t.tags.operatorKeyword,t.tags.modifier,t.tags.color,t.tags.constant(t.tags.name),t.tags.standard(t.tags.name),t.tags.standard(t.tags.tagName),t.tags.special(t.tags.brace),t.tags.atom,t.tags.bool,t.tags.special(t.tags.variableName)],color:"#0000ff"},{tag:[t.tags.moduleKeyword,t.tags.controlKeyword],color:"#af00db"},{tag:[t.tags.name,t.tags.deleted,t.tags.character,t.tags.macroName,t.tags.propertyName,t.tags.variableName,t.tags.labelName,t.tags.definition(t.tags.name)],color:"#0070c1"},{tag:t.tags.heading,fontWeight:"bold",color:"#0070c1"},{tag:[t.tags.typeName,t.tags.className,t.tags.tagName,t.tags.number,t.tags.changed,t.tags.annotation,t.tags.self,t.tags.namespace],color:"#267f99"},{tag:[t.tags.function(t.tags.variableName),t.tags.function(t.tags.propertyName)],color:"#795e26"},{tag:[t.tags.number],color:"#098658"},{tag:[t.tags.operator,t.tags.punctuation,t.tags.separator,t.tags.url,t.tags.escape,t.tags.regexp],color:"#383a42"},{tag:[t.tags.regexp],color:"#af00db"},{tag:[t.tags.special(t.tags.string),t.tags.processingInstruction,t.tags.string,t.tags.inserted],color:"#a31515"},{tag:[t.tags.angleBracket],color:"#383a42"},{tag:t.tags.strong,fontWeight:"bold"},{tag:t.tags.emphasis,fontStyle:"italic"},{tag:t.tags.strikethrough,textDecoration:"line-through"},{tag:[t.tags.meta,t.tags.comment],color:"#008000"},{tag:t.tags.link,color:"#4078f2",textDecoration:"underline"},{tag:t.tags.invalid,color:"#e45649"}];function Z(a){var{theme:o="light",settings:e={},styles:r=[]}={};return _({theme:o,settings:p({},X,e),styles:[...Y,...r]})}var tt=Z(),et={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},ot=[{tag:[t.tags.keyword,t.tags.operatorKeyword,t.tags.modifier,t.tags.color,t.tags.constant(t.tags.name),t.tags.standard(t.tags.name),t.tags.standard(t.tags.tagName),t.tags.special(t.tags.brace),t.tags.atom,t.tags.bool,t.tags.special(t.tags.variableName)],color:"#569cd6"},{tag:[t.tags.controlKeyword,t.tags.moduleKeyword],color:"#c586c0"},{tag:[t.tags.name,t.tags.deleted,t.tags.character,t.tags.macroName,t.tags.propertyName,t.tags.variableName,t.tags.labelName,t.tags.definition(t.tags.name)],color:"#9cdcfe"},{tag:t.tags.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[t.tags.typeName,t.tags.className,t.tags.tagName,t.tags.number,t.tags.changed,t.tags.annotation,t.tags.self,t.tags.namespace],color:"#4ec9b0"},{tag:[t.tags.function(t.tags.variableName),t.tags.function(t.tags.propertyName)],color:"#dcdcaa"},{tag:[t.tags.number],color:"#b5cea8"},{tag:[t.tags.operator,t.tags.punctuation,t.tags.separator,t.tags.url,t.tags.escape,t.tags.regexp],color:"#d4d4d4"},{tag:[t.tags.regexp],color:"#d16969"},{tag:[t.tags.special(t.tags.string),t.tags.processingInstruction,t.tags.string,t.tags.inserted],color:"#ce9178"},{tag:[t.tags.angleBracket],color:"#808080"},{tag:t.tags.strong,fontWeight:"bold"},{tag:t.tags.emphasis,fontStyle:"italic"},{tag:t.tags.strikethrough,textDecoration:"line-through"},{tag:[t.tags.meta,t.tags.comment],color:"#6a9955"},{tag:t.tags.link,color:"#6a9955",textDecoration:"underline"},{tag:t.tags.invalid,color:"#ff0000"}];function at(a){var{theme:o="dark",settings:e={},styles:r=[]}={};return _({theme:o,settings:p({},et,e),styles:[...ot,...r]})}var rt=at();const T=(a,o={})=>a??o,nt=T(T(m.MarkEdit.userSettings)["extension.markeditThemeVSCode"]),w=nt.enabledMode??"both",st={extension:tt,colors:{accentColor:"#0070c1",syntaxMarker:"#a31515"}},ct={extension:rt,colors:{accentColor:"#9cdcfe",syntaxMarker:"#ce9178"}};z({light:["both","light"].includes(w)?st:void 0,dark:["both","dark"].includes(w)?ct:void 0});
